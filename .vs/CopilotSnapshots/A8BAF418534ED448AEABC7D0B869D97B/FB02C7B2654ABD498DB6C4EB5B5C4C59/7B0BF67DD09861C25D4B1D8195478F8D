<!DOCTYPE html>
<html lang="en">
<head>
	<!-- page title and meta information -->
	<title>COP 4331 Contacts App</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	
	<!-- external javascript dependencies -->
	<script type="text/javascript" src="js/code.js"></script>
	
	<!-- stylesheet imports -->
    <link href="css/styles.css" rel="stylesheet">	
    <link href="https://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
	
	<!-- page initialization script -->
	<script type="text/javascript">
	document.addEventListener('DOMContentLoaded', function() 
	{
		// verify user authentication but don't auto-load contacts
		readCookie();
		initializeDarkMode();
	}, false);
	</script>
	
</head>
<body>

<!-- floating background shapes -->
<div class="floating-shapes">
	<div class="shape"></div>
	<div class="shape"></div>
	<div class="shape"></div>
</div>

<!-- dark mode toggle -->
<div id="darkModeToggle">
	<button type="button" id="darkModeButton" class="dark-mode-btn" onclick="toggleDarkMode();">
		<i id="darkModeIcon" class="fas fa-moon"></i>
	</button>
</div>

<!-- main page header -->
<h1 id="title">
	<i class="fas fa-address-book" style="margin-right: 1rem; font-size: 2.2rem;"></i>
	Contacts App
</h1>

<!-- user information and logout section -->
<div id="loggedInDiv">
	<div class="user-info-card">
		<i class="fas fa-user-circle" style="margin-right: 0.5rem; font-size: 1.2rem;"></i>
		<span id="userName"></span>
		<button type="button" id="logoutButton" class="buttons logout-btn" onclick="doLogout();">
			<i class="fas fa-sign-out-alt" style="margin-right: 0.5rem;"></i>
			Log Out
		</button>
	</div>
</div>

<!-- main application interface -->
<div id="accessUIDiv">
	<!-- contact visibility controls -->
	<div id="contactControls" class="control-section">
		<h3><i class="fas fa-eye" style="margin-right: 0.5rem;"></i>Contact Visibility</h3>
		<button type="button" id="showContactsButton" class="buttons secondary-btn" onclick="toggleContactsVisibility();">
			<i class="fas fa-eye" style="margin-right: 0.5rem;"></i>
			Show All Contacts
		</button>
		<button type="button" id="hideContactsButton" class="buttons secondary-btn" style="display:none;" onclick="toggleContactsVisibility();">
			<i class="fas fa-eye-slash" style="margin-right: 0.5rem;"></i>
			Hide Contacts
		</button>
	</div>

	<!-- contact search functionality -->
	<div class="control-section">
		<h3><i class="fas fa-search" style="margin-right: 0.5rem;"></i>Search Contacts</h3>
		<div class="search-container">
			<div class="input-group">
				<i class="fas fa-search input-icon"></i>
				<input type="text" id="searchText" placeholder="Search by name, email, or phone..."/>
			</div>
			<div class="button-group">
				<button type="button" id="searchContactButton" class="buttons" onclick="searchContacts();">
					<i class="fas fa-search" style="margin-right: 0.5rem;"></i>
					Search
				</button>
				<button type="button" id="clearSearchButton" class="buttons secondary-btn" onclick="clearSearch();">
					<i class="fas fa-times" style="margin-right: 0.5rem;"></i>
					Clear
				</button>
			</div>
		</div>
		<span id="contactSearchResult"></span>
	</div>
	
	<!-- contact list display area -->
	<div id="contactList" style="display:none;">
	</div>

	<!-- add new contact form section -->
	<div class="control-section">
		<h3><i class="fas fa-plus-circle" style="margin-right: 0.5rem;"></i>Add New Contact</h3>
		<div class="form-container">
			<div class="form-row">
				<div class="input-group">
					<i class="fas fa-user input-icon"></i>
					<input type="text" id="firstNameText" placeholder="First Name *" required>
				</div>
				<div class="input-group">
					<i class="fas fa-user input-icon"></i>
					<input type="text" id="lastNameText" placeholder="Last Name *" required>
				</div>
			</div>
			<div class="form-row">
				<div class="input-group">
					<i class="fas fa-envelope input-icon"></i>
					<input type="email" id="emailText" placeholder="Email Address *" required>
				</div>
				<div class="input-group">
					<i class="fas fa-phone input-icon"></i>
					<input type="tel" id="phoneText" placeholder="Phone Number *" required oninput="formatPhoneNumber(this)">
				</div>
			</div>
			<button type="button" id="addContactButton" class="buttons add-btn" onclick="addContact();">
				<i class="fas fa-plus" style="margin-right: 0.5rem;"></i>
				Add Contact
			</button>
		</div>
		<span id="contactAddResult"></span>
	</div>
</div>

<!-- edit contact modal -->
<div id="editContactModal" class="modal" style="display:none;">
	<div class="modal-content">
		<span class="close" onclick="closeEditModal();">&times;</span>
		<h3><i class="fas fa-edit" style="margin-right: 0.5rem;"></i>Edit Contact</h3>
		<input type="hidden" id="editContactId">
		<div class="form-row">
			<div class="input-group">
				<i class="fas fa-user input-icon"></i>
				<input type="text" id="editFirstNameText" placeholder="First Name *" required>
			</div>
			<div class="input-group">
				<i class="fas fa-user input-icon"></i>
				<input type="text" id="editLastNameText" placeholder="Last Name *" required>
			</div>
		</div>
		<div class="form-row">
			<div class="input-group">
				<i class="fas fa-envelope input-icon"></i>
				<input type="email" id="editEmailText" placeholder="Email Address *" required>
			</div>
			<div class="input-group">
				<i class="fas fa-phone input-icon"></i>
				<input type="tel" id="editPhoneText" placeholder="Phone Number *" required oninput="formatPhoneNumber(this)">
			</div>
		</div>
		<div class="modal-buttons">
			<button type="button" class="buttons" onclick="updateContact();">
				<i class="fas fa-save" style="margin-right: 0.5rem;"></i>
				Update Contact
			</button>
			<button type="button" class="buttons cancel-btn" onclick="closeEditModal();">
				<i class="fas fa-times" style="margin-right: 0.5rem;"></i>
				Cancel
			</button>
		</div>
		<span id="contactUpdateResult"></span>
	</div>
</div>

</body>
</html>