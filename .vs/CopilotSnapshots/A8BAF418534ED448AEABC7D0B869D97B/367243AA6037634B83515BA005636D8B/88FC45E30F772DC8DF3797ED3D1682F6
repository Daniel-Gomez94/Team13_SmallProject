<!DOCTYPE html>
<html lang="en">
<head>
	<!-- page title and meta information -->
	<title>COP 4331 Contacts App</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	
	<!-- external javascript dependencies -->
	<script type="text/javascript" src="js/code.js"></script>
	
	<!-- stylesheet imports -->
    <link href="css/styles.css" rel="stylesheet">	
    <link href="https://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
	
	<!-- page initialization script -->
	<script type="text/javascript">
	document.addEventListener('DOMContentLoaded', function() 
	{
		// verify user authentication but don't auto-load contacts
		readCookie();
		initializeDarkMode();
	}, false);
	</script>
	
</head>
<body>

<!-- floating background shapes -->
<div class="floating-shapes" aria-hidden="true">
	<div class="shape"></div>
	<div class="shape"></div>
	<div class="shape"></div>
</div>

<!-- dark mode toggle -->
<div id="darkModeToggle">
	<button type="button" 
			id="darkModeButton" 
			class="dark-mode-btn" 
			onclick="toggleDarkMode();"
			aria-label="Toggle dark mode"
			aria-describedby="darkModeDescription"
			title="Switch between light and dark themes">
		<i id="darkModeIcon" class="fas fa-moon" aria-hidden="true"></i>
	</button>
	<span id="darkModeDescription" class="sr-only">
		Currently in light mode. Click to switch to dark mode.
	</span>
</div>

<!-- main page header -->
<header>
	<h1 id="title">
		<i class="fas fa-address-book" style="margin-right: 1rem; font-size: 2.2rem;" aria-hidden="true"></i>
		Contacts App
	</h1>
</header>

<!-- user information and logout section -->
<div id="loggedInDiv">
	<div class="user-info-card">
		<i class="fas fa-user-circle" style="margin-right: 0.5rem; font-size: 1.2rem;" aria-hidden="true"></i>
		<span id="userName"></span>
		<button type="button" 
				id="logoutButton" 
				class="buttons logout-btn" 
				onclick="doLogout();"
				aria-label="Log out of your account">
			<i class="fas fa-sign-out-alt" style="margin-right: 0.5rem;" aria-hidden="true"></i>
			Log Out
		</button>
	</div>
</div>

<!-- main application interface -->
<main id="accessUIDiv">
	<!-- contact visibility controls -->
	<section id="contactControls" class="control-section">
		<h2><i class="fas fa-eye" style="margin-right: 0.5rem;" aria-hidden="true"></i>Contact Visibility</h2>
		<button type="button" 
				id="showContactsButton" 
				class="buttons secondary-btn" 
				onclick="toggleContactsVisibility();"
				aria-describedby="contactVisibilityHelp">
			<i class="fas fa-eye" style="margin-right: 0.5rem;" aria-hidden="true"></i>
			Show All Contacts
		</button>
		<button type="button" 
				id="hideContactsButton" 
				class="buttons secondary-btn" 
				style="display:none;" 
				onclick="toggleContactsVisibility();"
				aria-describedby="contactVisibilityHelp">
			<i class="fas fa-eye-slash" style="margin-right: 0.5rem;" aria-hidden="true"></i>
			Hide Contacts
		</button>
		<div id="contactVisibilityHelp" class="field-help">
			Toggle the visibility of your contact list
		</div>
	</section>

	<!-- contact search functionality -->
	<section class="control-section">
		<h2><i class="fas fa-search" style="margin-right: 0.5rem;" aria-hidden="true"></i>Search Contacts</h2>
		<div class="search-container">
			<div class="input-group">
				<label for="searchText" class="sr-only">Search contacts</label>
				<i class="fas fa-search input-icon" aria-hidden="true"></i>
				<input type="text" 
					   id="searchText" 
					   placeholder="Search by name, email, or phone..."
					   aria-describedby="searchHelp"/>
			</div>
			<div id="searchHelp" class="field-help">
				Enter any part of a contact's name, email, or phone number to search
			</div>
			<div class="button-group">
				<button type="button" 
						id="searchContactButton" 
						class="buttons" 
						onclick="searchContacts();"
						aria-describedby="searchResultsRegion">
					<i class="fas fa-search" style="margin-right: 0.5rem;" aria-hidden="true"></i>
					Search
				</button>
				<button type="button" 
						id="clearSearchButton" 
						class="buttons secondary-btn" 
						onclick="clearSearch();"
						aria-label="Clear search and show all contacts">
					<i class="fas fa-times" style="margin-right: 0.5rem;" aria-hidden="true"></i>
					Clear
				</button>
			</div>
		</div>
		<div id="contactSearchResult" role="status" aria-live="polite"></div>
	</section>
	
	<!-- contact list display area -->
	<section id="contactList" style="display:none;" aria-live="polite" aria-label="Contact list">
	</section>

	<!-- add new contact form section -->
	<section class="control-section">
		<h2><i class="fas fa-plus-circle" style="margin-right: 0.5rem;" aria-hidden="true"></i>Add New Contact</h2>
		<form class="form-container" onsubmit="addContact(); return false;" novalidate>
			<div class="form-row">
				<div class="input-group">
					<label for="firstNameText" class="sr-only">First Name (required)</label>
					<i class="fas fa-user input-icon" aria-hidden="true"></i>
					<input type="text" 
						   id="firstNameText" 
						   placeholder="First Name *" 
						   required
						   aria-describedby="firstNameHelp">
				</div>
				<div class="input-group">
					<label for="lastNameText" class="sr-only">Last Name (required)</label>
					<i class="fas fa-user input-icon" aria-hidden="true"></i>
					<input type="text" 
						   id="lastNameText" 
						   placeholder="Last Name *" 
						   required
						   aria-describedby="lastNameHelp">
				</div>
			</div>
			<div class="form-row">
				<div class="input-group">
					<label for="emailText" class="sr-only">Email Address (required)</label>
					<i class="fas fa-envelope input-icon" aria-hidden="true"></i>
					<input type="email" 
						   id="emailText" 
						   placeholder="Email Address *" 
						   required
						   aria-describedby="emailHelp">
				</div>
				<div class="input-group">
					<label for="phoneText" class="sr-only">Phone Number (required)</label>
					<i class="fas fa-phone input-icon" aria-hidden="true"></i>
					<input type="tel" 
						   id="phoneText" 
						   placeholder="Phone Number *" 
						   required 
						   oninput="formatPhoneNumber(this)"
						   aria-describedby="phoneHelp">
				</div>
			</div>
			<div class="field-help">
				<span id="firstNameHelp">Enter the contact's first name</span> • 
				<span id="lastNameHelp">Enter the contact's last name</span> • 
				<span id="emailHelp">Enter a valid email address</span> • 
				<span id="phoneHelp">Enter a 10-digit phone number (will be formatted automatically)</span>
			</div>
			<button type="submit" 
					id="addContactButton" 
					class="buttons add-btn"
					aria-describedby="addContactResult">
				<i class="fas fa-plus" style="margin-right: 0.5rem;" aria-hidden="true"></i>
				Add Contact
			</button>
		</form>
		<div id="contactAddResult" role="alert" aria-live="polite"></div>
	</section>
</main>

<!-- edit contact modal -->
<div id="editContactModal" class="modal" style="display:none;" role="dialog" aria-labelledby="editModalTitle" aria-modal="true">
	<div class="modal-content">
		<button class="close" 
				onclick="closeEditModal();"
				aria-label="Close edit contact dialog"
				title="Close dialog">
			&times;
		</button>
		<h3 id="editModalTitle">
			<i class="fas fa-edit" style="margin-right: 0.5rem;" aria-hidden="true"></i>
			Edit Contact
		</h3>
		<form onsubmit="updateContact(); return false;" novalidate>
			<input type="hidden" id="editContactId">
			<div class="form-row">
				<div class="input-group">
					<label for="editFirstNameText" class="sr-only">First Name (required)</label>
					<i class="fas fa-user input-icon" aria-hidden="true"></i>
					<input type="text" 
						   id="editFirstNameText" 
						   placeholder="First Name *" 
						   required>
				</div>
				<div class="input-group">
					<label for="editLastNameText" class="sr-only">Last Name (required)</label>
					<i class="fas fa-user input-icon" aria-hidden="true"></i>
					<input type="text" 
						   id="editLastNameText" 
						   placeholder="Last Name *" 
						   required>
				</div>
			</div>
			<div class="form-row">
				<div class="input-group">
					<label for="editEmailText" class="sr-only">Email Address (required)</label>
					<i class="fas fa-envelope input-icon" aria-hidden="true"></i>
					<input type="email" 
						   id="editEmailText" 
						   placeholder="Email Address *" 
						   required>
				</div>
				<div class="input-group">
					<label for="editPhoneText" class="sr-only">Phone Number (required)</label>
					<i class="fas fa-phone input-icon" aria-hidden="true"></i>
					<input type="tel" 
						   id="editPhoneText" 
						   placeholder="Phone Number *" 
						   required 
						   oninput="formatPhoneNumber(this)">
				</div>
			</div>
			<div class="modal-buttons">
				<button type="submit" class="buttons">
					<i class="fas fa-save" style="margin-right: 0.5rem;" aria-hidden="true"></i>
					Update Contact
				</button>
				<button type="button" 
						class="buttons cancel-btn" 
						onclick="closeEditModal();"
						aria-label="Cancel editing and close dialog">
					<i class="fas fa-times" style="margin-right: 0.5rem;" aria-hidden="true"></i>
					Cancel
				</button>
			</div>
		</form>
		<div id="contactUpdateResult" role="alert" aria-live="polite"></div>
	</div>
</div>

</body>
</html>